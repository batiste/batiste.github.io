<html>
<head>
<meta charset="UTF-8">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Della+Respira&family=Lobster+Two:wght@400;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="design.css">
<link rel="stylesheet" href="expansion.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="./rasterizeHTML.allinone.js"></script>
<script src="./cards.fr.js"></script>
<script src="./cards.en.js"></script>
<script src="./cards.es.js"></script>
</head>

<body>

<h2>DeckHand Crew Expansion</h2>

<div style="display: flex;">
    <div class="booklet" id="face" title="booklet-face">
        <div class="innerBooklet">     
            <div>
            <h3 style="margin-top:0">
                Crew Expansion Setup<span style="float: right; font-size: 10px; margin-top: -4px; margin-right: -2px;">DeckHand Rules 3/3</span>
            </h3>
         
            <p>Create a shuffled <b>Crew deck</b> with the 12 Crew cards and place the deck 
                face down. Then proceed with a normal setup.</p>

            <h3>
                New Rules for Crew
            </h3>

            <p>
                In your action phase, you have 1 new possible type of action:
            </p>
            <ul>
                <li>
                Hire 1 Crew: Look at the top 3 cards of the Crew deck, 
                place one face down in front of you, return one to the 
                bottom of the deck, and keep the remaining one on top. 
                </li>
            </ul>

            <p style="margin-top: 3px">
                Face-down Crew are <b>inactive</b> and you cannot own more than 3 Crew.
            </p>
            </p>
                In your action phase, you may
                <b>Pay 1 <img class="rule-icon coin" src="icons/coins.svg" /></b> to 
                flip 1 Crew face up; this can be done with any of your Crew.

                Activated Crew provide 3 to 4 skills for use during your action phase,
                with each Crew limited to using only 1 skill per turn. 

                Importantly, neither of these 2 effects constitutes an Action or uses an Action.
                There are 3 types of skills:
            </p>
        
            <ol>
                <li><b>Free</b><b class="arrow" style="color: #218235;">▸</b>&nbsp;&nbsp;&nbsp;&nbsp;: 
                    No conditions to use this skill.
                </li>
                <li><b>Salary</b><b class="arrow" style="color: #d2423c;">▸</b>&nbsp;&nbsp;&nbsp;&nbsp;: Carry out the action(s) on the left side as a cost.</li>
                <li><b>Condition</b>: 
                    The left side describes a condition that needs to be met this turn.
                    It could be a situation or some actions.
                </li>
            </ol>

            <p style="margin-top: 3px;">Once the skill is used successfully, you gain the effect on the right side.</p>


            <h3>New Keywords and Examples</h3>

            <ul>
                <li><b>Unearth 1:</b> Put 1 card from your stash at the bottom of your deck.</li>
                <li><b>Retire 1:</b> Remove 1 card that you own from the game.</li>
                <li><b>Hire 1 Crew:</b> Hire 1 Crew without using an action this turn.</li>
            </ul>

            <div style="margin-top:10px;">

            <style>
                .ex {
                    display: flex;
                    align-items: center;
                }
                .ex img {
                    margin-right: 5px;
                }
            </style>

            <p class="ex">
                <img src="ext/ex1.png" height="20px"> As a cost, instantly discard 1 Adventure to gain a Buy restricted to Adventures.
            </p>
            <p class="ex">
                <img src="ext/ex2.png" height="20px"> Have at least 6 Adventures in your stash to unlock the skill.
            </p>
            <p class="ex">
                <img src="ext/ex3.png" height="20px"> Play at least 2 Attacks this turn to unlock the skill.
            </p>

            </div>


            </div>
        </div>
    </div>
</div>

<button onclick="downloadBookletFace()">Download booklet face</button>


<div style="display: flex;">
    <div class="booklet" style="flex-direction: column;" id="back" title="booklet-face">
        <img src="ext/tryptic.png" width="100%; height: 100%">
        <div class="innerBooklet" style="position: relative; margin-top: 2mm">
            <p><b>Embark on a thrilling pirate adventure for 2 to 4 players, igniting your deck-building creativity!</b></p>
            <p style="margin-top: 2px">In DeckHand, players take turns accumulating gold 
                coins and purchasing new cards to enhance their decks and increase 
                their influence. Competing against opponents, you'll aim to acquire the
                most valuable cards.</p>

            <p style="margin-top: 3px">DeckHand contains this rule booklet, 
                77 playing cards from the base game and 8 Coin tracking cards.<br>
                The Crew expansion brings 12 Crew<br> cards and 5 extra base cards.
                <br>This booklet contains:</p>

            <ol style="margin-top: 5px">
                <li>Setup and Player's turn.</li>
                <li>General rules and End of the game.</li>
                <li>Crew expansion rules.</li>
            </ol>

            <img src="ext/infos.png" style="position: absolute;width: 120px; right: 5px; bottom: -2px">
        </div>
    </div>
</div>

<button onclick="downloadBookletBack()">Download booklet back</button>



<div class="config">
    General config
    <label>Use jpg<input type="checkbox" onchange="updateFormat(this)"></label>
    <label>Zoom<input type="text" value="6.5" onchange="updateZoom(this)"></label>
    <label>MPC image format<input type="checkbox" checked onchange="outputFormat(this)"></label>
    <label>PnP mask for easy cuts<input type="checkbox" onchange="PNPoutputFormat(this)"></label>
</div>


<!-- <div style="clear: both;">
    <img width="240" src="https://raw.githubusercontent.com/batiste/batiste.github.io/03451c0b33ddc125cb38a1750487a939a1397f1c/pirates-2/back-character.jpg">
    <img src="./back-character.jpg" width="240">
</div> -->

<p>
    <button onclick="selectAll(this)">Select All</button>
    <button onclick="generatePrintSheet(this)">Create Print Sheet PDF from selection</button>
    <button onclick="downloadSelection(this)">Download selection</button>
</p>


<!-- class="lang-fr" -->

<style>


</style>


<div id="cards" class="lang-fr">


    <div class="card-container">
        <div class="card" id="card-2" title="Expansion Rules 2/2">
            <div class="inner">
                <div class="front type-indicator quick-ref quick-ref-2"> 
                    <div class="frame"><div></div></div>
                    <img src="marketing/booklet.png" class="bg">
                    
                    <span class="text card-rule">
                        <span class="innerText">
                            <span class="index-page">Rules 1/8</span>
    

                        <img src="./ext/tryptic.png" style="width: 118%;margin-left:-9%">
                        <b style="margin-bottom: 4px; margin-top: 7px; display: block;">
                            First Play
                        </b>

                        <p>
                            You have in your possession DeckHand and its Crew expansion.
                            If it is your first play we advise you to exclude all the Crew 
                            cards and ignore the rules cards 7 and 8.<br>
                            For more information for a beginner game flip this card.
                        </p>
    
                        </span>
                    </span>
                    <span class="subtype">undefined</span>
                    
    
                    <div class="mpc">
                        <img src="mpc-no-border.png">
                    </div>
                    <div class="mask"></div>
                </div>
                <div class="back">
                    <img src="back.png">
                    <div class="mpc">
                        <img src="mpc.png">
                    </div>
                </div>
            </div>
        </div>
        <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
        <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2">Part of print sheet</label>
    </div>


    <div class="card-container">
        <div class="card" id="card-2" title="Expansion Rules 2/2">
            <div class="inner">
                <div class="front type-indicator quick-ref quick-ref-2"> 
                    <div class="frame"><div></div></div>
                    <img src="marketing/booklet.png" class="bg">
                    
                    <span class="text card-rule">
                        <span class="innerText">
                            <span class="index-page">Rules 2/8</span>
    
                        <b style="margin-bottom: 5px; display: block;">
                            Set up for 2 to 4 players
                        </b>
                         
                        <ol style="margin-bottom: 3px;">
                            <li>Give each player 1 Coins and 1 Coins Indicator card and a <b>shuffled deck</b> of 2 Fist Fight and 2 Celebrate. 
                                Remove all remaining instances of these from the game.
                            </li>
                            <li>
                                Shuffle the rest and create the <b>supply deck</b> with 11 cards per player. The remaining cards constitute the <b>reload deck</b>.
                            </li>
                            <li>
                                Place 6 cards from the reload deck face up on the table to create the <b>supply</b>.
                                Maintain 6 face-up supply cards <b>at all times</b> by replacing them from the <b>supply deck</b>.
                            </li>
                        </ol>

                        <div style="display: flex; flex-direction: row; margin-top: 16px">
                            <img src="marketing/how-to-play.png" width="105px" style="margin-right:5px">
                            <div>
                                You will find a how to play video, beginner setup and 
                                clarification on certain cards at this address: http://bit.ly/dh-htp
                            </div>
                        </div>

    
                       
    
    
                        </span>
                    </span>
                    <span class="subtype">undefined</span>
                    
    
                    <div class="mpc">
                        <img src="mpc-no-border.png">
                    </div>
                    <div class="mask"></div>
                </div>
                <div class="back">
                    <img src="back.png">
                    <div class="mpc">
                        <img src="mpc.png">
                    </div>
                </div>
            </div>
        </div>
        <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
        <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2">Part of print sheet</label>
    </div>
    
    
    <div class="card-container">
        <div class="card" id="card-2" title="Expansion Rules 2/2">
            <div class="inner">
                <div class="front type-indicator quick-ref quick-ref-2"> 
                    <div class="frame"><div></div></div>
                    <img src="marketing/booklet.png" class="bg">
                    
                    <span class="text card-rule">
                        <span class="innerText">
                        <span class="index-page">Rules 3/8</span>
                     
                        <b>Player Turns</b>
    
                        <p>
                            A random player starts. Each player takes turns, following these steps:
                         </p>
                     
                         <ol style="padding-left:-10px">
                            <li>Resolve any start-of-turn effects that might trigger <img class="rule-icon" src="icons/bookmark-yellow.svg" />.</li>
                            <li>Discard <img class="rule-icon" src="icons/card-discard-yellow.svg" /> your hand, if any, then draw 3 cards from your deck.
                                From now on, your discard pile is referred to as the <b>stash</b>.
                            </li>
                            <li>You then have 2 Actions that you can use in the following ways:
                                <ul>
                                    <li>Play a card from your hand: Set the card aside, resolve its effects and any consequences, and <b>then</b> put the card into your stash.</li>
                                    <li>Buy a card from the supply: Pay the cost 
                                         indicated by the chest <img class="rule-icon" src="icons/chest-simplified.svg" /> at the bottom right
                                         with coins <img class="rule-icon coin" src="icons/coins.svg" /> and put it into your stash.</li>
                                 </ul>
                            </li>
                         </ol>
                         <p style="margin-top:1px">
                            If your deck is ever empty during the game, <b>immediately</b> shuffle your stash 
                            into a new deck and resume any ongoing effects.
                         </p>
    
    
                        </span>
                    </span>
                    <span class="subtype">undefined</span>
                    
    
                    <div class="mpc">
                        <img src="mpc-no-border.png">
                    </div>
                    <div class="mask"></div>
                </div>
                <div class="back">
                    <img src="back.png">
                    <div class="mpc">
                        <img src="mpc.png">
                    </div>
                </div>
            </div>
        </div>
        <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
        <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2">Part of print sheet</label>
    </div>
    

    <div class="card-container">
        <div class="card" id="card-2" title="Expansion Rules 2/2">
            <div class="inner">
                <div class="front type-indicator quick-ref quick-ref-2"> 
                    <div class="frame"><div></div></div>
                    <img src="marketing/booklet.png" class="bg">
                    
                    <span class="text card-rule">
                        <span class="innerText">
                        <span class="index-page">Board setup example for 1 player&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rules 4/8</span>


                         <img src="marketing/board-large.jpg" width="150%" style="rotate: -90deg;margin-left:-25%;margin-bottom:-15%">
    
    
                        </span>
                    </span>
                    <span class="subtype">undefined</span>
                    
    
                    <div class="mpc">
                        <img src="mpc-no-border.png">
                    </div>
                    <div class="mask"></div>
                </div>
                <div class="back">
                    <img src="back.png">
                    <div class="mpc">
                        <img src="mpc.png">
                    </div>
                </div>
            </div>
        </div>
        <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
        <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2">Part of print sheet</label>
    </div>


    <div class="card-container">
        <div class="card" id="card-2" title="Expansion Rules 1/2">
            <div class="inner">
                <div class="front type-indicator quick-ref quick-ref-2"> 
                    <div class="frame"><div></div></div>
                    <img src="marketing/booklet.png" class="bg">
                    
                    <span class="text card-rule">
                        <span class="innerText">
                        <span class="index-page">5/8</span>
                        <b style="margin-bottom:5px; display: block;">
                            General Rules
                        </b>
                    
                        <p>Line up your stash cards facing upwards and with an offset, allowing all players to quickly identify them.
                            Make sure your Coin cards are visible.
                        </p>
                        <p>Resolve a card’s effect completely and in the written order before taking other actions.
                            If effects would trigger simultaneously, the initiator of 
                            the first effect decides the order in which they are resolved.</p>
                        <p>You can only discard cards from your hand. Revealing or looking at cards doesn't  
                            add them to your hand or empties decks. Unless specified, revealed 
                            cards return to their original position immediately.</p>
                        <p>If an effect cannot be fully applied, it still applies partially, to the extent possible.
                            However, you cannot select effects or targets that are not applicable.
                            You must always own a minimum of 4 cards.</p>
    
                        </span>
                    </span>
                    <span class="subtype">undefined</span>
                    
    
                    <div class="mpc">
                        <img src="mpc-no-border.png">
                    </div>
                    <div class="mask"></div>
                </div>
                <div class="back">
                    <img src="back.png">
                    <div class="mpc">
                        <img src="mpc.png">
                    </div>
                </div>
            </div>
        </div>
        <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
        <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2">Part of print sheet</label>
    </div>


    <div class="card-container">
        <div class="card" id="card-2" title="Expansion Rules 1/2">
            <div class="inner">
                <div class="front type-indicator quick-ref quick-ref-2"> 
                    <div class="frame"><div></div></div>
                    <img src="marketing/booklet.png" class="bg">
                    
                    <span class="text card-rule">
                        <span class="innerText">
                        <span class="index-page">6/8</span>
                        <b style="margin-bottom: 4px; display: block;">
                            Card text reference
                        </b>
            
                        <p><b>+1 <img class="rule-icon coin" src="icons/coins.svg" />:</b> Increase your coins by 1.</p>
                        <p><b>+1 <img class="rule-icon draw" src="icons/card-draw-2.svg" />:</b> You may draw 1 card from your deck immediately.</p>
                        <p><b>+1 <img class="rule-icon reload" src="icons/cycle-2.svg" />:</b> You may put 1 supply card at the bottom of the reload deck immediately. 
                            If you do, replace it with a <b>reload deck</b> card.</p>
                        <p><b>+1 Action:</b> Gain 1 extra Action to use this turn.</p>
                        <p><b>+1 Buy:</b> You may Buy 1 card without using an Action this turn.</p>
                        <p><b>+1 Discard:</b> You must discard 1 card.</p>
                    
                        <b>End of the game</b>
        
                        <p>
                            The game ends when the supply deck is empty. 
                            The current player finishes their turn, and the others take a final turn with only 1 starting Action.
                            Count the number of hooks <img class="rule-icon" src="icons/hook-simplified.svg" /> in each deck. The player with the most
                            hooks wins. In the case of a tie, the player with the most coins wins, followed by the player who ended the game.
                        </p>
    
                        </span>
                    </span>
                    <span class="subtype">undefined</span>
                    
    
                    <div class="mpc">
                        <img src="mpc-no-border.png">
                    </div>
                    <div class="mask"></div>
                </div>
                <div class="back">
                    <img src="back.png">
                    <div class="mpc">
                        <img src="mpc.png">
                    </div>
                </div>
            </div>
        </div>
        <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
        <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2">Part of print sheet</label>
    </div>


<div class="card-container">
    <div class="card" id="card-2" title="Expansion Rules 1/2">
        <div class="inner">
            <div class="front type-indicator quick-ref quick-ref-2"> 
                <div class="frame"><div></div></div>
                <img src="marketing/booklet.png" class="bg">
                
                <span class="text card-rule">
                    <span class="innerText">
                    <span class="index-page">7/8</span>
                    <b style="margin-bottom:1px">
                        Crew Expansion Setup
                    </b>
                 
                    <p style="margin-top:0">Create a shuffled <b>Crew deck</b> with the 12 Crew 
                        cards and place the deck face down. Then proceed with a normal setup.</p>
        
                    <b style="margin-bottom:1px">
                        New Rules for Crew
                    </b>
        
                    <p style="margin-bottom:1px">
                        In your action phase, you have 1 new possible type of action:
                    </p>
                    <p style="margin-left: 6px">
                        Hire 1 Crew: Look at the top 3 cards of the Crew deck, 
                        place one face down in front of you, return one to the 
                        bottom of the deck, and keep the remaining one on top. 
                    </p>

                    <p style="margin-top: 0px">
                        Face-down Crew are <b>inactive</b> and you cannot own more than 3 Crew.
                        In your action phase, you may
                        <b>Pay 1 <img class="rule-icon coin" src="icons/coins.svg" /></b> to 
                        flip 1 Crew face up; this can be done with any of your Crew.
        
                        Activated Crew provides 3 to 4 skills for use during your action phase,
                        with each Crew limited to using only 1 skill per turn. 
        
                        Importantly, neither of these 2 effects constitutes an Action or uses an Action.
                        There are 3 types of skills:
                    </p>

                    <ol>
                        <li><b>Free</b><b class="arrow" style="color: #218235;">▸</b>&nbsp;&nbsp;&nbsp;&nbsp;
                            No conditions to use this skill.
                        </li>
                    </ol>

                    </span>
                </span>
                <span class="subtype">undefined</span>
                

                <div class="mpc">
                    <img src="mpc-no-border.png">
                </div>
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back.png">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2">Part of print sheet</label>
</div>





<div class="card-container">
    <div class="card" id="card-2" title="Expansion Rules 2/2">
        <div class="inner">
            <div class="front type-indicator quick-ref quick-ref-2"> 
                <div class="frame"><div></div></div>
                <img src="marketing/booklet.png" class="bg">
                
                <span class="text card-rule">
                    <span class="innerText">
                        <span class="index-page">8/8</span>
                        <ol start="2">
                            <li><b>Salary</b>
                                <b class="arrow" style="color: #d2423c;">▸</b>&nbsp;&nbsp;&nbsp;&nbsp; 
                                Carry out the left side as a cost.</li>
                            <li><b>Condition</b>: 
                                The left side describes a condition that needs to be met this turn.
                                It could be a situation or some actions.
                            </li>
                        </ol>
            
                        <p style="margin-top: 3px;">
                            Once the skill is used successfully, you gain the effect on the right side.
                        </p>
            
            
                        <b>New Keywords and Examples</b>
            
                        <ul>
                            <li><b>Unearth 1:</b> Put 1 card from your stash at the bottom of your deck.</li>
                            <li><b>Retire 1:</b> Remove 1 card that you own from the game.</li>
                            <li><b>Hire 1 Crew:</b> Hire 1 Crew without using an action this turn.</li>
                        </ul>

                        <p style="margin-top: 6px;">
                            <img src="ext/ex1.png" height="19px"><br>
                            <span>As a cost, instantly discard 1 Adventure to gain a Buy restricted to Adventures.</span>
                        </p>
                        <p style="margin-top: 2px; display: flex; align-items: center;">
                            <img src="ext/ex2.png" height="19px" style="float: left; margin-right: 4px"> 
                            Have at least 6 Adventures in your stash to unlock the skill.
                        </p>
                        <p style="margin-top: 2px; display: flex; align-items: center;">
                            <img src="ext/ex3.png" height="19px" style="float: left; margin-right: 4px"> Play at least 2 Attacks this turn to unlock the skill.
                        </p>

                    </span>
                </span>
                <span class="subtype">undefined</span>
                

                <div class="mpc">
                    <img src="mpc-no-border.png">
                </div>
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back.png">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #3, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-2" onclick="changePrintSelection(this)" data-card-id="2" "="">Part of print sheet</label>
</div>


<div class="card-container">
    <div class="card mission" id="card-66" title="Young Pirate">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img style="" src="characters/blood.png">
                    <img class="left-mirror" src="characters/blood.png">
                    <img class="right-mirror" src="characters/blood.png">
                    <img class="top-mirror" src="characters/blood.png">
                </div>

                
                <span class="title">Young Pirate</span>
                <span class="text">
                    <span class="innerText">
                        <div class="actions">
                            <span class="left act"><b>Discard 1 <img class="rule-icon" src="icons/attack.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon" src="icons/cycle-2.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left act"><b>Retire 1 stash card</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 2 <img class="rule-icon" src="icons/attack.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>6 <img class="rule-icon" src="icons/attack.svg" /> in stash</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <!-- <p style="margin-bottom: 0;">
                            <img class="rule-icon cycle" src="icons/hook-simplified.svg" /> 
                            for each <img class="rule-icon" src="icons/attack.svg" /> you own in excess of 8.</p> -->
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66" "="">Part of print sheet</label>
</div>

<div class="card-container">
    <div class="card mission" id="card-66" title="The Duchess">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img src="characters/markswoman.png">
                    <img class="top-mirror" src="characters/markswoman.png">
                    <img class="left-mirror" src="characters/markswoman.png">
                    <img class="right-mirror" src="characters/markswoman.png">
                </div>  
                
                <span class="title">The Duchess</span>
                <span class="text">
                    <span class="innerText">
                        <div class="actions">
                            <span class="left act"><b>Discard 1</b></span>
                            <span class="right"><b>+1 <img class="rule-icon" src="icons/cycle-2.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left act"><b>Pay 1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon" src="icons/target.svg" /> Buy</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 1 <img class="rule-icon" src="icons/target.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>3 <img class="rule-icon" src="icons/target.svg" /> in stash</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <!-- <p style="margin-bottom: 0;">
                            <img class="rule-icon cycle" src="icons/hook-simplified.svg" />
                             for each <img class="rule-icon" src="icons/target.svg" /> you own in excess of 3.</p> -->
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div>



<div class="card-container">
    <div class="card mission" id="card-66" title="The Engineer">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img src="characters/engineer.png">
                    <img class="left-mirror" src="characters/engineer.png">
                    <img class="right-mirror" src="characters/engineer.png">
                    <img class="top-mirror" src="characters/engineer.png">
                </div>  
          
                <span class="title">The Engineer</span>
                <span class="text">
                    <span class="innerText">
                        <div class="actions">
                            <span class="left act"><b>Pay 1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+1 Buy</b></span>
                        </div>
                        <div class="actions">
                            <span class="left act"><b>Pay 2 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 1 <img class="rule-icon" src="icons/fist.svg" /> or 1 <img class="rule-icon" src="icons/bookmark-yellow.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 1 <img class="rule-icon" src="icons/fist.svg" /> and 1 <img class="rule-icon" src="icons/bookmark-yellow.svg" /></b></span>
                            <span class="right"><b>+2 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66" "="">Part of print sheet</label>
</div>




<div class="card-container">
    <div class="card mission" id="card-66" title="The Governor">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img  src="characters/governor.png">
                    <img class="left-mirror" src="characters/governor.png">
                    <img class="right-mirror" src="characters/governor.png">
                    <img class="top-mirror" src="characters/governor.png">
                </div>
                
                <span class="title">The Governor</span>
                <span class="text">
                    <span class="innerText">
                        <p style="margin-top:0">Cards that cost more than 2 are <b>Wonders</b>.</p>
                        <div class="actions">
                            <span class="left"><b>Play 1 Wonder</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <!-- <div class="actions">
                            <span class="left"><b>Play 2 fat card. <img class="rule-icon" src="icons/bookmark-yellow.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div> -->
                        <div class="actions">
                            <span class="left"><b>Play 2 Wonders</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Buy 2 Wonders</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>On your last turn</b></span>
                            <span class="right"><b>+1 Buy</b></span>
                        </div>
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66" "="">Part of print sheet</label>
</div>



<div class="card-container">
    <div class="card mission" id="card-66" title="Chief Cook">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img style="" src="characters/cook.png">
                    <img class="left-mirror" src="characters/cook.png">
                    <img class="right-mirror" src="characters/cook.png">
                    <img class="top-mirror" src="characters/cook.png">
                </div>
                
                <span class="title">Chief Cook</span>
                <span class="text">
                    <span class="innerText">
                        <p style="margin-top:0">Cards that cost 1 are called <b>Scraps</b>.</p>
                        <div class="actions">
                            <span class="left" style="width:56%"><b>Play 2 Scraps</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left" style="width:56%"><b>Buy 2 Scraps</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <!-- <div class="actions">
                            <span class="left"><b>Play 2 fat card. <img class="rule-icon" src="icons/bookmark-yellow.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div> -->
                        <div class="actions">
                            <span class="left" style="width:56%"><b>7 Scraps in stash</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <div class="actions">
                            <span class="left" style="width:55%"><b>Your stash is empty</b></span>
                            <span class="right"><b>+1 Scrap Buy</b></span>
                        </div>
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66" "="">Part of print sheet</label>
</div>

<div class="card-container">
    <div class="card mission" id="card-66" title="The Adventurer">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img style="" src="characters/adventurer.png">
                    <img class="left-mirror" src="characters/adventurer.png">
                    <img class="right-mirror" src="characters/adventurer.png">
                    <img class="top-mirror" src="characters/adventurer.png">
                </div>
                
                <span class="title">The Adventurer</span>
                <span class="text">
                    <span class="innerText">
                        <div class="actions">
                            <span class="left act"><b>Discard 1 <img class="rule-icon" src="icons/tentacle.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon" src="icons/card-draw-2.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left act"><b>Pay 1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon" src="icons/tentacle.svg" /> Buy</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 2 <img class="rule-icon" src="icons/tentacle.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>6 <img class="rule-icon" src="icons/tentacle.svg" /> in stash</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66" "="">Part of print sheet</label>
</div>


<div class="card-container">
    <div class="card mission" id="card-66" title="The Architect">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg no-top" class="">
                    <img src="characters/architect.png">
                    <img class="left-mirror" src="characters/architect.png">
                    <img class="right-mirror" src="characters/architect.png">
                    <img class="top-mirror" src="characters/architect.png">
                </div>
                
                <span class="title">The Architect</span>
                <span class="text">
                    <span class="innerText">
                        <div class="actions">
                            <span class="left act"><b>Discard 1 <img class="rule-icon struct-icon" src="icons/structure.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 2 <img class="rule-icon struct-icon" src="icons/structure.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Buy 2 <img class="rule-icon struct-icon" src="icons/structure.svg" /></b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>4 <img class="rule-icon struct-icon" src="icons/structure.svg" /> in stash</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div>


<div class="card-container">
    <div class="card mission" id="card-66" title="The Zoologist">
        <div class="inner">
            <div class="front">
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img src="characters/zoologist.png">
                    <img class="left-mirror" src="characters/zoologist.png">
                    <img class="right-mirror" src="characters/zoologist.png">
                    <img class="top-mirror" src="characters/zoologist.png">
                </div>
                
                <span class="title">The Deckhand</span>
                <span class="text">
                    <!-- <p style="margin-top: 0">Cards with a discard trigger <img class="rule-icon" src="icons/card-discard-yellow.svg" /> are Pets.</p> -->
                    <span class="innerText">
                        <div class="actions">
                            <span class="left act"><b>Discard 1</b></span>
                            <span class="right"><b>+1 <img class="rule-icon" src="icons/card-draw-2.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 1 <img class="rule-icon" src="icons/card-discard-yellow.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Buy 1 <img class="rule-icon" src="icons/card-discard-yellow.svg" /></b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>2 <img class="rule-icon" src="icons/card-discard-yellow.svg" /> in stash</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                        <!-- <div class="actions">
                            <span class="left"><b>Shuffle > 5</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div> -->
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div>


<div class="card-container">
    <div class="card mission" id="card-66" title="The Archeologist">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>
                <div class="bg no-top">
                    <img src="characters/archeologist.png" >
                    <img class="left-mirror" src="characters/archeologist.png">
                    <img class="right-mirror" src="characters/archeologist.png">
                    <img class="top-mirror" src="characters/archeologist.png">
                </div>
                
                <span class="title">The Archeologist</span>
                <span class="text">
                    <!-- <p>Unearth: put a stash card at the bottom of your deck.</p> -->
                    <span class="innerText">
                        <div class="actions">
                            <span class="left free"></span>
                            <span class="right"><b>Flip 1 supply card face up</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 1 <img class="rule-icon" src="icons/structure.svg" /> and 1 <img class="rule-icon" src="icons/tentacle.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Buy 1 <img class="rule-icon" src="icons/structure.svg" /> and 1 <img class="rule-icon" src="icons/tentacle.svg" /></b></span>
                            <span class="right"><b>+2 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>2 <img class="rule-icon" src="icons/structure.svg" /> in stash</b></span>
                            <span class="right"><b>Unearth 2</b></span>
                        </div>
                        <!-- <div class="actions">
                            <span class="left"><b>Shuffle > 5</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div> -->
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div>



<div class="card-container">
    <div class="card mission" id="card-66" title="Captain Bloodfang">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>
                <div class="bg reduced-top no-top">
                    <img src="characters/count.png">
                    <img class="left-mirror" src="characters/count.png">
                    <img class="right-mirror" src="characters/count.png">
                    <img class="top-mirror" src="characters/count.png">
                </div>
                
                <span class="title" style="font-size: 15px;">Captain Bloodfang</span>
                <span class="text">
                    <p style="margin-top:0"><b>X</b> is the number of active Crew you own.</p>
                    <span class="innerText">
                        <div class="actions">
                            <span class="left act"><b>Pay 3 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+X Action(s)</b></span>
                        </div>
                        <div class="actions">
                            <span class="left act"><b>Retire 1 active Crew</b></span>
                            <span class="right"><b>+3 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 1 <img class="rule-icon" src="icons/attack.svg" /></b></span>
                            <span class="right"><b>+X <img class="rule-icon" src="icons/cycle-2.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Hire 1 Crew</b></span>
                            <span class="right"><b>+X <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <!-- <div class="actions">
                            <span class="left"><b>Shuffle > 5</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div> -->
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div>

<!-- 
<div class="card-container">
    <div class="card mission" id="card-66" title="Gold Baron">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>
                <img src="characters/coin.png" class="bg">
                
                <span class="title">The Gold Baron</span>
                <span class="text">
                    <span class="innerText">
                        <div class="actions">
                            <span class="left"><b>Own 3 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon" src="icons/card-draw-2.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Own 5 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Own 7 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>+1 Buy</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Spend 5 coins</b></span>
                            <span class="right"><b>+1 Action</b></span>
                        </div>
                    </span> 
                </span>
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div> -->



<div class="card-container">
    <div class="card mission" id="card-66" title="Saboteur">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>
                <div class="bg">
                    <img src="characters/saboteur.png">
                    <img  class="left-mirror" src="characters/saboteur.png">
                    <img  class="right-mirror" src="characters/saboteur.png">
                    <img  class="top-mirror" src="characters/saboteur.png">
                </div>
                
                <span class="title">Saboteur</span>
                <span class="text">
                    <p style="margin-top:0">Any 2 same-cost, face-up cards are <b>Pairs</b>.</p>
                    <span class="innerText">
                        <div class="actions">
                            <span class="left free"><b></b></span>
                            <span class="right"><b>Target enemy Unearth a 1-cost card</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Play 2 <img class="rule-icon" src="icons/attack.svg" /></b></span>
                            <span class="right"><b>Swap a Pair</b></span>
                        </div>
                        <div class="actions">
                            <span class="left"><b>Buy 1 <img class="rule-icon" src="icons/tentacle.svg" /></b></span>
                            <span class="right"><b>Steal 1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div>
                        <div class="actions">
                            <span class="left" style="width: 32%"><b>Hire 1 Crew</b></span>
                            <span class="right"><b>Flip 1 Crew face down</b></span>
                        </div>
                        <!-- <div class="actions">
                            <span class="left"><b>Shuffle > 5</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div> -->
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
                

                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div>


<div class="card-container">
    <div class="card mission" id="card-66" title="Voodoo Witch">
        <div class="inner">
            <div class="front"> 
                <div class="frame"></div><div class="frame-bg"></div>

                <div class="bg">
                    <img src="characters/witch.png">
                    <img class="left-mirror" src="characters/witch.png">
                    <img class="right-mirror" src="characters/witch.png">
                    <img class="top-mirror" src="characters/witch.png">
                </div>

                
                <span class="title">Voodoo Witch</span>
                <span class="text">
                    <p style="margin-top:0; font-size: 9.2px"><b>Oracle X</b>: Look at the top X card of any deck.</p>
                    <span class="innerText">
                        <div class="actions">
                            <span class="left free"></span>
                            <span class="right"><b>Oracle 3</b></span>
                        </div>
                        <div class="actions">
                            <span class="left act-big"><b>Pay 1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right" style="font-size: 8.9px; padding-left:0px; padding-right:1px"><b>Oracle 4 and place 1 card at the bottom of the deck</b></span>
                        </div>
                        <div class="actions">
                            <span class="left act"><b>Pay 1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                            <span class="right"><b>Hire 1 Crew</b></span>
                        </div>
                        <!-- <div class="actions">
                            <span class="left"><b>Shuffle > 5</b></span>
                            <span class="right"><b>+1 <img class="rule-icon coin" src="icons/coins.svg" /></b></span>
                        </div> -->
                    </span> 
                </span>
                <!-- <span class="subtype">Crew</span> -->
            
                <!-- <div class="mpc">
                    <img src="mpc-no-border.png">
                </div> -->
                <div class="mask"></div>
            </div>
            <div class="back">
                <img src="back-character.jpg">
                <div class="mpc">
                    <img src="mpc.png">
                </div>
            </div>
        </div>
    </div>
    <button onclick="downloadCardButton(this)">Download #67, copies: 1</button><br>
    <label><input type="checkbox" id="check-pdf-66" onclick="changePrintSelection(this)" data-card-id="66">Part of print sheet</label>
</div>



</div>

</body>

<script>

    var lang = 'en';


    var format = 'png'
    function updateFormat(e) {
        if (e.checked) {
            format = 'jpg'
        } else {
            format = 'png'
        }
    }

    var preparePrintClass = 'preparePrint';
    function outputFormat(e) {
        if (e.checked) { 
            preparePrintClass = 'preparePrint';
        } else { 
            preparePrintClass = 'preparePrintNotMPC';
        }
    }

    function PNPoutputFormat(e) {
        if (e.checked) { 
            preparePrintClass = 'preparePrintPNP';
        } else { 
            preparePrintClass = 'preparePrint';
        }
    }

    function download(url, title) {
        var a = document.createElement('a')
        a.href=url
        a.download=title+"."+format;
        document.body.appendChild(a)
        a.click()
        a.remove()
    }

    function changePrintSelection(e) {
        cards.forEach((card) => {
            if(card.id == parseInt(e.dataset.cardId, 10)) {
                card['pdf'] = e.checked
            }
        })
    }

    var zoom = 3.16
    function updateZoom(e) {
        zoom = parseFloat(e.value)
    }

    function downloadCardButton(e) {
        downloadCard(e.parentNode.querySelector('.card'))
    }

    function downloadCard(card, cb) {
        createCardImage(card, (canvas) => {
            var title = card.title.toLowerCase().replace(/\s/g, '-')
            if (format=='png') {
                img = canvas.toDataURL();
            } else {
                img = canvas.toDataURL("image/jpeg", 0.9)
            }
            download(img, title);
            console.log('download', title);
            cb && cb(title);
        })
    }

    function downloadBookletFace(id) {
        createBookletImage(document.getElementById(id || 'face'))
    }

    function downloadBookletBack(id) {
        createBookletImage(document.getElementById(id || 'back'))
    }

    function createCardImage(card, cb) {

        card.classList.add(preparePrintClass)
        cls = ""
        if (lang) {
            cls = 'class="lang-fr"'
        }

        var h = `
            <link href="https://fonts.googleapis.com/css2?family=Della+Respira&family=Lobster+Two:wght@400;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
            <link rel="stylesheet" href="design.css">
            <link rel="stylesheet" href="expansion.css">
            <style>
                html, body {margin:0; padding:0; background-color: transparent;}
                .card {zoom: ${zoom}; float: none; position: initial; margin: 0;}
            </style>
            <div ${cls}>
                ${card.outerHTML}
            </div>`

        rasterizeHTML.drawHTML(h, null).then(function success(renderResult) {
            img = renderResult.image;
            var canvas = document.createElement('canvas');
            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;
            document.body.appendChild(canvas)
            const ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0)
            card.classList.remove(preparePrintClass)
            canvas.parentNode.removeChild(canvas)
            cb && cb(canvas)
        }, function error(e) {
            console.log("Error on card", card.title, e)
        });
    }

    function createBookletImage(booklet, cb) {
        
        booklet.classList.add(preparePrintClass)

        var h = `
            <link href="https://fonts.googleapis.com/css2?family=Della+Respira&family=Lobster+Two:wght@400;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
            <link rel="stylesheet" href="design.css">
            <link rel="stylesheet" href="expansion.css">
            <style>
                html, body {margin:0; padding:0}
                .booklet {zoom: ${zoom}; float: none; position: initial; margin: 0;}
            </style>
            
            ${booklet.outerHTML}`

        rasterizeHTML.drawHTML(h, null).then(function success(renderResult) {
            img = renderResult.image;
            var canvas = document.createElement('canvas');
            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;
            document.body.appendChild(canvas);
            const ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0)
            var title = booklet.title.toLowerCase().replace(/\s/g, '-')
            download(canvas.toDataURL(), title);
            booklet.classList.remove(preparePrintClass)
            canvas.parentNode.removeChild(canvas)
        })

    }


var toRender = 0;

function bindImage(element, card, cb) {
    if (card['canvas']) {
        return cb();
    }
    createCardImage(element, (canvas) => {
        card['canvas'] = canvas
        cb();
    })
}

function selectAll() { 
    for (i=0; i<cards.length; i++) {
        var card = cards[i];
        card.pdf = true;
        document.getElementById('check-pdf-'+card['id']).checked = true
    }
}

function downloadSelection(e) {
    e.disable = true;
    var previous = e.innerHTML
    toRender = 0;
    cards_to_render = {}
    queue = []
    rendering = {}

    e.innerHTML = 'Rendering..., please wait, it might take a while.'

    for (i=0; i<cards.length; i++) {
        var card = cards[i];
        if (card.pdf) {
            toRender = toRender + 1;
            queue.push(card)
        }
    }

    function render(card) {
        rendering[card.title] = card
        var e = document.getElementById('card-'+card['id'])
        downloadCard(e, () => {
            delete rendering[card.title];
            toRender = toRender - 1;
        })
    }

    var inter = setInterval(() => {
        if (queue.length > 0) {
            if (queue.length > 0 || Object.keys(rendering).length > 0) {
                c = queue.pop();
                render(c)
            }
            e.innerHTML = `Starting rendering of cards (${toRender}).`
            return
        }
        clearInterval(inter);
        e.innerHTML = 'Done!'
        setTimeout(() => {
            e.innerHTML = previous;
        }, 2000)
    }, 1000);
}

function generatePrintSheet(e) {
    e.disable = true;
    var previous = e.innerHTML
    e.innerHTML = 'Please wait'
    toRender = 0;
    var jsPDF = window.jspdf.jsPDF;
    // A4
    var doc = new jsPDF({
        unit: "mm",
        format: [297, 210],
    });

    queue = []
    rendering = {}

    e.innerHTML = 'Rendering..., please wait, it might take a while.'

    for (i=0; i<cards.length; i++) {
        var card = cards[i];
        if (card.pdf) {
            toRender = toRender + 1;
            queue.push(card)
        }
    }

    function render(card) {
        rendering[card.title] = card
        var e = document.getElementById('card-'+card['id'])
        bindImage(e, card, ()=> {
            delete rendering[card.title];
            toRender = toRender - 1;
        })
    }

    e.innerHTML = 'Rendering...'

    var inter = setInterval(() => {

        if (queue.length > 0 || Object.keys(rendering).length > 0) {
            if (Object.keys(rendering).length == 0) {
                c = queue.pop();
                render(c)
            }
            e.innerHTML = `Starting rendering of cards (${toRender}).`
            console.log(rendering, queue.length)
            return
        }

        clearInterval(inter);
        e.innerHTML = `Card render pass done, now PDF page rendering.`

        var pageCounter = 0;
        for (i=0; i<cards.length; i++) {
            var card = cards[i];
            if (!card.pdf) {
                continue
            }
            e.innerHTML = 'Rendering page ' + card['title'];
            for (j=0; j<card.amount; j++) {
                if (pageCounter > 8) {
                    doc.addPage()
                    pageCounter = 0;
                }

                // do not expect a lot of saved space using JPG
                var f = 'JPG'
                if (format=='png') {
                    f = 'PNG'
                }

                // printer need 8 mm margins

                

                var y = 10 + ((297 - 20) / 3.0) * Math.floor(pageCounter / 3.0)
                var x = 4 + ((210 - 10) / 3.0) * (pageCounter % 3);
                doc.addImage(card.canvas, f, x, y, 69.596, 94.996, card['title'], "FAST", 0)
                pageCounter += 1;
            }
        }

        doc.save("print.pdf");
        e.innerHTML = 'Done!'
        setTimeout(() => {
            e.innerHTML = previous;
        }, 500)
    }, 1000)
}

</script>
</html>